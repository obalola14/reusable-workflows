name: Run Selenium Tests
on: 
  workflow_call:
    inputs: #parameter definition #what user should input for workflow to run
      ENVIRONMENT:
        description: 'Deployment Environment (e.g., STAGING, PRODUCTION).'
        required: true
        type: string

jobs:        
  run-test:
    environment: ${{ inputs.ENVIRONMENT }}
    runs-on: github-actions-scaleset-demo
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v6
   
    - name: Run Selenium Tests
      env:
        APP_BASE_URL: ${{ vars.APP_BASE_URL }}
      run: |
        mkdir -p reports
        pytest tests/ --html=reports/selenium-report.html --self-contained-html

    - name: Upload Selenium Test Report
      uses: actions/upload-artifact@v5
      with:
        name: selenium-test-report
        path: reports/
